<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CDI: Documentation: Dependency Trees</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Documentation: Dependency Trees</h1>

    <section>

<header>
    

    <h2>Dependency Trees</h2>
</header>

<article>
    <p>The module instances are organized in dependency trees. You can see a dependency tree as a set of instances
that logically belong together. The main tree always has the identifier <strong>root</strong>. </p>
<p>Take a mongodb database as an example. You hav a connector class for a single
collection. But now you have multiple modules that require connection to different collections. Of course 
you now could start to connect to all of you needed collections in you collection connector. But wouldn't
it be easier to build this generic? This is what is possible with dependency trees. You just define the
injections in your, lets say controllers, with an identifier that matches the collection you need and your
connector will know about this (for a little example look below). The module will have the current tree 
available in the parameter <code>module.exports.tree</code>. Now there is a little caveat. It is called
dependency tree for a reason. When a module is instantiated cdi will try to inject instances of that tree 
only if not advised differently. You can force this by setting the tree identifier in the inject definition of
the exports (see <a href="tutorial-module_structure.html">Module Structure</a> for details).</p>
<h3>example</h3><p>src/speed.js:</p>
<pre class="prettyprint source lang-js"><code>class Speed {
    constructor() {
        this.speed = 0;
    }

    setSpeed(speed) {
        this.speed = speed;
    }
}
module.exports = Speed;</code></pre><p>src/wheel.js:</p>
<pre class="prettyprint source lang-js"><code>class Wheel {
    constructor(size, speed) {
        this.size = size;
        this.position = module.exports.tree;
        this.speed = speed;
    }
}
module.exports = Wheel;
module.exports.inject = ['config:bike:wheels.size', 'Speed:root'];</code></pre><p>src/bike.js:</p>
<pre class="prettyprint source lang-js"><code>class Bike {
    constructor(frontWheel, backWheel) {
        this.wheels = {frontWheel, backWheel};
    }
}
module.exports = Bike;
module.exports.inject = ['Wheel:front', 'Wheel:back'];</code></pre><p>main.js:</p>
<pre class="prettyprint source lang-js"><code>const path = require('path');
const CDI = require('cdi');

const bikeConfig = {
    wheels: {
        size: 26
    }
};

let cdi = new CDI({
    moduleSrc: [path.join(__dirname, 'src')],
    cacheFile: path.join(__dirname, 'cache', 'cdi.json'),
    configurations: {
        bike: bikeConfig
    }
});

let myBike = cdi.getInstance('Bike');
// now you got your bike with two injected wheels, which got the size information injected 
// and share one common speed instance</code></pre>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Documentation</h3><ul><li>General</li><li><ul class="child-nav"><li><a href="tutorial-options.html">Options</a></li><li><a href="tutorial-injection.html">Injection</a></li><li><a href="tutorial-instantiator.html">Instantiator</a></li><li><a href="tutorial-module_structure.html">Module Structure</a></li></ul></li><li>Deep Dive</li><li><ul class="child-nav"><li><a href="tutorial-cache.html">Caching</a></li><li><a href="tutorial-dependency_trees.html">Dependency Trees</a></li><li><a href="tutorial-global_scope.html">Global Scope</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="AbstractInstantiator.html">AbstractInstantiator</a></li><li><a href="ConfigResolver.html">ConfigResolver</a></li><li><a href="DependencyTree.html">DependencyTree</a></li><li><a href="ModuleAnalyzer.html">ModuleAnalyzer</a></li><li><a href="ModuleResolver.html">ModuleResolver</a></li><li><a href="ObjectManager.html">ObjectManager</a></li><li><a href="Prototype.html">Prototype</a></li><li><a href="Singleton.html">Singleton</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>