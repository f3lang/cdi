<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CDI: Documentation: Prototype Inheritance</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Documentation: Prototype Inheritance</h1>

    <section>

<header>
    

    <h2>Prototype Inheritance</h2>
</header>

<article>
    <p>When you code extensively in es6 you will sooner or later start to use prototype inheritance. This is
a really cool feature and helps to keep your code clean.</p>
<p>So somewhere you will have something in your code, that looks like this:</p>
<pre class="prettyprint source lang-js"><code>class Wheels {
    constructor() {
        this.numberOfWheels = 2;
    }
}
module.exports = Wheels;

class Vehicle {
    constructor(wheels) {
        this.wheels = wheels;
    }
}
module.exports = Vehicle;
module.exports.inject = ['Wheels'];

class Bike extends Vehicle {
    constructor() {
        super();
    }
}
module.exports = Bike;

let bike = cdi.getInstance('Bike');</code></pre><p>So far, it looks quite nice. But in terms of dependendency injection this construct is a bit tricky. You
don't request the parent classes but the target class 'Bike', which has it's own injection definitions.
Since js is a prototype based language, the injection definition is overwritten by the bike class. </p>
<p>So you need to support this somehow. CDI does. When the prototype is instantiated, cdi walks up the
prototype tree and wraps proxy prototypes around them, which will handle the injection. After the
instantiation, the prototype tree is rewritten to its original state, so you don't see any differences.</p>
<p>The parent prototype will not interfere with direct instantiations of the parent prototype. In the
upper example you could still instantiate an Object Vehicle which would be an entirely different object
than Bike. The injection and resolution of the inject properties will only work in the corresponding 
scope of the prototype, which defined the injection property. So for the upper example this means, that
you cannot override the <strong>Wheels</strong> injection of Vehicle with an injection definition in Bike 
(e.g. <strong>Wheels:root</strong>).</p>
<p>But there is another cool thing you can do: You can still hand over arguments to the parent prototype.
They will be a appended to the injected propertied. So if you want to do this, you can do something like
this:</p>
<pre class="prettyprint source lang-js"><code>class Wheels {
    constructor() {
        this.numberOfWheels = 2;
    }
}
module.exports = Wheels;

class Vehicle {
    constructor(wheels, sizeOfWheels) {
        // will be injected by cdi
        this.wheels = wheels;
        // your parameter you hand over on instantiation
        this.sizeOfWheels = sizeOfWheels;
    }
}
module.exports = Vehicle;
module.exports.inject = ['Wheels'];

class Bike extends Vehicle {
    constructor() {
        super(26);
    }
}
module.exports = Bike;

let bike = cdi.getInstance('Bike');
// now your bike has a wheel size of 26</code></pre>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Documentation</h3><ul><li>General</li><li><ul class="child-nav"><li><a href="tutorial-options.html">Options</a></li><li><a href="tutorial-injection.html">Injection</a></li><li><a href="tutorial-instantiator.html">Instantiator</a></li><li><a href="tutorial-module_structure.html">Module Structure</a></li></ul></li><li>Deep Dive</li><li><ul class="child-nav"><li><a href="tutorial-cache.html">Caching</a></li><li><a href="tutorial-dependency_trees.html">Dependency Trees</a></li><li><a href="tutorial-global_scope.html">Global Scope</a></li><li><a href="tutorial-prototype_inheritance.html">Prototype Inheritance</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="AbstractInstantiator.html">AbstractInstantiator</a></li><li><a href="ConfigResolver.html">ConfigResolver</a></li><li><a href="DependencyTree.html">DependencyTree</a></li><li><a href="ModuleAnalyzer.html">ModuleAnalyzer</a></li><li><a href="ModuleResolver.html">ModuleResolver</a></li><li><a href="ObjectManager.html">ObjectManager</a></li><li><a href="Prototype.html">Prototype</a></li><li><a href="PrototypeWrapper.html">PrototypeWrapper</a></li><li><a href="Singleton.html">Singleton</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>